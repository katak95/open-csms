# Open-CSMS Environment Configuration Template
# Copy this file to .env and customize for your environment

# ============================================
# APPLICATION SETTINGS
# ============================================

# Application version (set by CI/CD)
VERSION=0.1.0-SNAPSHOT

# Spring profiles (development, test, staging, production)
SPRING_PROFILES_ACTIVE=development

# Server port
SERVER_PORT=8080

# ============================================
# DATABASE CONFIGURATION
# ============================================

# PostgreSQL database
POSTGRES_DB=opencsms_dev
POSTGRES_USER=opencsms
POSTGRES_PASSWORD=opencsms_dev_password
DATABASE_URL=jdbc:postgresql://postgres:5432/opencsms_dev
DATABASE_USERNAME=opencsms
DATABASE_PASSWORD=opencsms_dev_password

# Connection pool settings
DB_POOL_MIN_SIZE=5
DB_POOL_MAX_SIZE=20
DB_POOL_MAX_LIFETIME=1800000

# ============================================
# CACHE CONFIGURATION (REDIS)
# ============================================

REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=redis_dev_password
REDIS_URL=redis://:redis_dev_password@redis:6379
REDIS_DATABASE=0
REDIS_TIMEOUT=5000

# ============================================
# TIME-SERIES DATABASE (INFLUXDB)
# ============================================

INFLUXDB_URL=http://influxdb:8086
INFLUXDB_ORG=opencsms
INFLUXDB_BUCKET=telemetry
INFLUXDB_TOKEN=dev-token-please-change-in-production
INFLUXDB_ADMIN_USER=admin
INFLUXDB_ADMIN_PASSWORD=admin_password

# ============================================
# SECURITY CONFIGURATION
# ============================================

# JWT settings
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRATION=86400
JWT_REFRESH_EXPIRATION=604800

# OAuth2 settings (optional)
OAUTH2_CLIENT_ID=your-oauth2-client-id
OAUTH2_CLIENT_SECRET=your-oauth2-client-secret
OAUTH2_REDIRECT_URI=http://localhost:8080/login/oauth2/code/opencsms

# OIDC settings (optional)
OIDC_ISSUER_URI=https://your-oidc-provider.com
OIDC_CLIENT_ID=your-oidc-client-id
OIDC_CLIENT_SECRET=your-oidc-client-secret

# ============================================
# OCPP CONFIGURATION
# ============================================

# OCPP protocol versions supported
OCPP_VERSIONS=1.6,2.0.1
OCPP_DEFAULT_VERSION=1.6

# WebSocket settings
OCPP_WEBSOCKET_PATH=/ocpp
OCPP_WEBSOCKET_PORT=8080
OCPP_WEBSOCKET_MAX_CONNECTIONS=1000
OCPP_WEBSOCKET_TIMEOUT=300000

# Certificate settings for mTLS
OCPP_CERTIFICATE_PATH=/app/certs
OCPP_CA_CERTIFICATE=ca-cert.pem
OCPP_SERVER_CERTIFICATE=server-cert.pem
OCPP_SERVER_KEY=server-key.pem

# ============================================
# OCPI CONFIGURATION
# ============================================

# OCPI Hub settings
OCPI_HUB_MODE=true
OCPI_VERSION=2.2.1
OCPI_COUNTRY_CODE=FR
OCPI_PARTY_ID=OCS

# OCPI endpoints
OCPI_BASE_URL=https://api.opencsms.io/ocpi/2.2.1
OCPI_TOKEN_A=your-ocpi-token-a
OCPI_TOKEN_B=your-ocpi-token-b
OCPI_TOKEN_C=your-ocpi-token-c

# Hub configuration
OCPI_HUB_CLIENT_INFO_NAME=Open-CSMS Hub
OCPI_HUB_CLIENT_INFO_URL=https://opencsms.io

# ============================================
# MONITORING & LOGGING
# ============================================

# Logging levels
LOGGING_LEVEL_ROOT=INFO
LOGGING_LEVEL_OPENCSMS=DEBUG
LOGGING_LEVEL_SPRINGFRAMEWORK=INFO
LOGGING_LEVEL_HIBERNATE=WARN

# Metrics and monitoring
MANAGEMENT_ENDPOINTS_ENABLED=true
MANAGEMENT_HEALTH_SHOW_DETAILS=when-authorized

# Prometheus metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=grafana_password

# ============================================
# NOTIFICATION SETTINGS
# ============================================

# Email configuration (optional)
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-email-password
MAIL_FROM=noreply@opencsms.io

# Slack notifications (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# Discord notifications (optional)
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK

# ============================================
# EXTERNAL SERVICES
# ============================================

# Maps and geocoding service (optional)
MAPS_API_KEY=your-maps-api-key

# Payment gateway (optional)
PAYMENT_STRIPE_PUBLIC_KEY=pk_test_your_stripe_public_key
PAYMENT_STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key

# SMS service (optional)
SMS_PROVIDER=twilio
SMS_API_KEY=your-sms-api-key
SMS_API_SECRET=your-sms-api-secret

# ============================================
# DEVELOPMENT SETTINGS
# ============================================

# Debug mode
DEBUG_MODE=true
DEBUG_PORT=5005

# Hot reload
SPRING_DEVTOOLS_RESTART_ENABLED=true
SPRING_DEVTOOLS_LIVERELOAD_ENABLED=true

# H2 console (development only)
H2_CONSOLE_ENABLED=false
H2_CONSOLE_PATH=/h2-console

# ============================================
# TESTING SETTINGS
# ============================================

# Test database
TEST_DATABASE_URL=jdbc:h2:mem:testdb
TEST_DATABASE_DRIVER=org.h2.Driver

# Test containers
TESTCONTAINERS_REUSE_ENABLE=true

# ============================================
# PRODUCTION OVERRIDES
# (Only set these in production environment)
# ============================================

# Production database (PostgreSQL)
# POSTGRES_DB=opencsms_prod
# POSTGRES_USER=opencsms_prod
# POSTGRES_PASSWORD=very-secure-production-password
# DATABASE_URL=jdbc:postgresql://prod-postgres:5432/opencsms_prod

# Production Redis
# REDIS_PASSWORD=very-secure-redis-password
# REDIS_URL=redis://:very-secure-redis-password@prod-redis:6379

# Production InfluxDB
# INFLUXDB_TOKEN=very-secure-influxdb-token
# INFLUXDB_ADMIN_PASSWORD=very-secure-admin-password

# Production JWT
# JWT_SECRET=very-long-and-secure-jwt-secret-key-for-production

# SSL/TLS certificates
# SSL_CERTIFICATE_PATH=/app/certs/prod
# SSL_CERTIFICATE_FILE=opencsms.crt
# SSL_PRIVATE_KEY_FILE=opencsms.key

# Production monitoring
# SENTRY_DSN=https://your-sentry-dsn.com
# NEWRELIC_LICENSE_KEY=your-newrelic-license-key

# ============================================
# SECURITY NOTES
# ============================================

# 1. Never commit this file with real credentials to version control
# 2. Use Docker secrets or Kubernetes secrets in production
# 3. Rotate all secrets regularly
# 4. Use strong, unique passwords for each service
# 5. Enable TLS/SSL for all external communications
# 6. Regularly update all dependencies and base images