# SonarQube configuration for Open-CSMS
# This file provides configuration when running SonarQube analysis outside of Gradle

# Project identification
sonar.projectKey=open-csms
sonar.projectName=Open-CSMS
sonar.projectVersion=0.1.0-SNAPSHOT
sonar.projectDescription=Open Source Charging Station Management System

# Source and test directories
sonar.sources=src/main/java,modules
sonar.tests=src/test/java,src/integrationTest/java
sonar.sourceEncoding=UTF-8

# Java specific settings
sonar.java.source=17
sonar.java.target=17
sonar.java.binaries=build/classes/java/main
sonar.java.test.binaries=build/classes/java/test,build/classes/java/integrationTest

# Coverage reports
sonar.coverage.jacoco.xmlReportPaths=build/reports/jacoco/test/jacocoTestReport.xml
sonar.junit.reportPaths=build/test-results/test,build/test-results/integrationTest

# External tool reports
sonar.java.spotbugs.reportPaths=build/reports/spotbugs/main/spotbugs.xml
sonar.java.pmd.reportPaths=build/reports/pmd/main.xml
sonar.java.checkstyle.reportPaths=build/reports/checkstyle/main.xml

# Quality gates and thresholds
sonar.qualitygate.wait=true

# Code coverage thresholds
sonar.coverage.line.threshold=80
sonar.coverage.branch.threshold=75

# Duplication settings
sonar.cpd.java.minimumTokens=50
sonar.cpd.java.minimumLines=10

# Exclusions
sonar.exclusions=\
    **/generated/**,\
    **/target/**,\
    **/build/**,\
    **/*.properties,\
    **/*.xml,\
    **/*.yml,\
    **/*.yaml,\
    **/Application.java,\
    **/*Config.java,\
    **/*Configuration.java,\
    **/dto/**,\
    **/entity/**/package-info.java

# Test exclusions
sonar.test.exclusions=\
    **/test/**,\
    **/integrationTest/**

# Language specific exclusions
sonar.java.exclusions=\
    **/generated/**,\
    **/dto/**,\
    **/entity/**,\
    **/*Application.java

# Security hotspot rules
sonar.security.hotspots.inherited=true

# Custom rules and profiles
sonar.profile.java=Open-CSMS Quality Profile

# Analysis parameters
sonar.analysis.mode=publish
sonar.buildbreaker.skip=false

# SCM settings
sonar.scm.provider=git
sonar.scm.disabled=false

# Links
sonar.links.homepage=https://github.com/open-csms/open-csms
sonar.links.ci=https://github.com/open-csms/open-csms/actions
sonar.links.scm=https://github.com/open-csms/open-csms
sonar.links.issue=https://github.com/open-csms/open-csms/issues

# Organization settings (for SonarCloud)
# sonar.organization=open-csms
# sonar.host.url=https://sonarcloud.io

# Branch analysis (for PR analysis)
# sonar.pullrequest.key=${env.GITHUB_PR_NUMBER}
# sonar.pullrequest.branch=${env.GITHUB_HEAD_REF}
# sonar.pullrequest.base=${env.GITHUB_BASE_REF}
# sonar.pullrequest.github.repository=${env.GITHUB_REPOSITORY}

# Additional settings for Spring Boot projects
sonar.java.libraries=build/libs/*.jar
sonar.java.test.libraries=build/libs/*.jar